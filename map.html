<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Sikkim Monasteries Map</title>
Â  <link rel="stylesheet" href="style.css">

Â  Â  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

Â  Â  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
Â  <div class="map-layout">
Â  Â  Â  Â  <div class="sidebar">
Â  Â  Â  <h2>Sikkim</h2>
Â  Â  Â  <ul>
Â  Â  Â  Â  <li><a href="index.html">Home</a></li>
Â  Â  Â  Â  <li><a href="map.html">Attractions</a></li>
Â  Â  Â  Â  <li><a href="#">Plan Your Trip</a></li>
Â  Â  Â  </ul>
Â  Â  </div>

Â  Â  Â  Â  <div class="map-container">
Â  Â  Â  <input type="text" class="search-box" placeholder="AI Smart Search">
Â  Â  Â  Â  Â  Â  <div id="search-results"></div>
Â  Â  Â  <div id="map" style="height: 600px; width: 100%;"></div>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // Initialize Map
Â  Â  var map = L.map('map');

Â  Â  // Add OpenStreetMap Tile Layer
Â  Â  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
Â  Â  Â  attribution: '&copy; OpenStreetMap contributors'
Â  Â  }).addTo(map);

Â  Â  // âœ… Custom Red Icon
Â  Â  var redIcon = new L.Icon({
Â  Â  Â  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
Â  Â  Â  shadowUrl: 'https://unpkg.com/leaflet/dist/images/marker-shadow.png',
Â  Â  Â  iconSize: [25, 41],
Â  Â  Â  iconAnchor: [12, 41],
Â  Â  Â  popupAnchor: [1, -34],
Â  Â  Â  shadowSize: [41, 41]
Â  Â  });

Â  Â  // Monastery Data (with photos + detail page)
Â  Â  var monasteries = [
Â  Â  Â  { 
Â  Â  Â  Â  name: "Rumtek Monastery", 
Â  Â  Â  Â  coords: [27.33, 88.62], 
Â  Â  Â  Â  page: "rumtek.html",
Â  Â  Â  Â  img: " images/Rumtek Monastery.jpg"
Â  Â  Â  },
Â  Â  Â  { 
Â  Â  Â  Â  name: "Enchey Monastery", 
Â  Â  Â  Â  coords: [27.34, 88.62], 
Â  Â  Â  Â  page: "enchey.html",
Â  Â  Â  Â  img: "images/enchey.jpg"
Â  Â  Â  },
Â  Â  Â  { 
Â  Â  Â  Â  name: "Pemayangtse Monastery", 
Â  Â  Â  Â  coords: [27.28, 88.25], 
Â  Â  Â  Â  page: "pemyangtase.html",
Â  Â  Â  Â  img: "images/pemayangtse.jpg"
Â  Â  Â  },
Â  Â  Â  { 
Â  Â  Â  Â  name: "Tashiding Monastery", 
Â  Â  Â  Â  coords: [27.25, 88.30], 
Â  Â  Â  Â  page: "tashiding.html",
Â  Â  Â  Â  img: "images/tashiding.jpg"
Â  Â  Â  }
Â  Â  ];

Â  Â  // âœ… Add markers to group
Â  Â  var markerGroup = L.featureGroup();

Â  Â  monasteries.forEach(m => {
Â  Â  Â  var popupContent = `
Â  Â  Â  Â  <b>${m.name}</b><br>
Â  Â  Â  Â  <img src="${m.img}" alt="${m.name}" /><br>
Â  Â  Â  Â  <a href="${m.page}" target="_blank">View Details</a>
Â  Â  Â  `;
Â  Â  Â  var marker = L.marker(m.coords, { icon: redIcon })
Â  Â  Â  Â  .bindPopup(popupContent);
Â  Â  Â  markerGroup.addLayer(marker);
Â  Â  });

Â  Â  markerGroup.addTo(map);

Â  Â  // âœ… Fit map to markers
Â  Â  map.fitBounds(markerGroup.getBounds());

Â  Â  // ðŸ”Ž New Search functionality that uses the JSON file
Â  Â  const searchBox = document.querySelector('.search-box');
Â  Â  const searchResultsContainer = document.getElementById('search-results');
Â  Â  let monasteryData = [];

Â  Â  // Fetch the JSON data once when the page loads
Â  Â  fetch('monasteries.json')
Â  Â  Â  .then(response => response.json())
Â  Â  Â  .then(data => {
Â  Â  Â  Â  monasteryData = data;
Â  Â  Â  Â  console.log('Monastery data loaded:', monasteryData);
Â  Â  Â  })
Â  Â  Â  .catch(error => {
Â  Â  Â  Â  console.error('Error fetching monastery data:', error);
Â  Â  Â  });

Â  Â  searchBox.addEventListener('keyup', function (e) {
Â  Â  Â  const query = e.target.value.toLowerCase().trim();
Â  Â  Â  searchResultsContainer.innerHTML = ''; // Clear results

Â  Â  Â  if (query.length > 0) {
Â  Â  Â  Â  const filteredResults = monasteryData.filter(m => {
Â  Â  Â  Â  Â  const name = m.name.toLowerCase();
Â  Â  Â  Â  Â  const categories = m.categories.map(cat => cat.toLowerCase()).join(' ');
Â  Â  Â  Â  Â  const keywords = m.keywords.map(kw => kw.toLowerCase()).join(' ');
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  return name.includes(query) || categories.includes(query) || keywords.includes(query);
Â  Â  Â  Â  });
Â  Â  Â  Â  
Â  Â  Â  Â  if (filteredResults.length > 0) {
Â  Â  Â  Â  Â  filteredResults.forEach(m => {
Â  Â  Â  Â  Â  Â  const resultLink = document.createElement('a');
Â  Â  Â  Â  Â  Â  resultLink.href = m.link; // Use the 'link' property from the JSON file
Â  Â  Â  Â  Â  Â  resultLink.textContent = m.name;
Â  Â  Â  Â  Â  Â  resultLink.classList.add('search-result-link');
Â  Â  Â  Â  Â  Â  searchResultsContainer.appendChild(resultLink);
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  });
Â  </script>
Â  <script src="script.js"></script>
</body>
</html>